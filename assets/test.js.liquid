"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,c=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var ASSETS=window.whereToBuyAssets,VANCOUVER={lat:49.28323201694063,lng:-123.12089349382718},PhysicalStores=function(){return React.createElement("ul",{className:"where-to-buy__map-physical-stores"},React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")),React.createElement("li",{className:"where-to-buy__physical-store"},React.createElement("h4",null,"Nana’s bakery"),React.createElement("p",{className:"where-to-buy__physical-store-address"},"4400 Beresford Avenue Vancouver, BC, V3N 2C1"),React.createElement("p",{className:"where-to-buy__physical-store-distance"},"5km away")))},OnlineStores=function(){return React.createElement("div",{className:"where-to-buy__map-right-container"},React.createElement("div",{className:"where-to-buy__map-title-row"},React.createElement("h4",null,"Online shops")),React.createElement("ul",{className:"where-to-buy__map-online-stores"},React.createElement("li",{className:"where-to-buy__online-store"},React.createElement("h4",null,"Sweetapolita"),React.createElement("a",{href:"#"},"sweetapolita.com"))))},ResultCountSelector=function(){return React.createElement("div",{className:"where-to-buy__map-title-row"},React.createElement("h4",null,"Nearest Retail Stores"),React.createElement("select",{name:""},React.createElement("option",{value:"12"},"12"),React.createElement("option",{value:"24"},"24"),React.createElement("option",{value:"36"},"36"),React.createElement("option",{value:"48"},"48"),React.createElement("option",{value:"60"},"60"),React.createElement("option",{value:"100"},"100")))},MapContainer=function(e){var t=e.isMapActive,a=e.userLocation,r=React.useRef(),n=React.useRef(),e=_slicedToArray(React.useState(null),2),c=e[0],o=e[1];React.useEffect(function(){n.current=new google.maps.Map(r.current,{zoom:12,center:VANCOUVER,styles:MAP_STYLES,disableDefaultUI:!0,zoomControl:!0,controlSize:30})},[]),React.useEffect(function(){a&&(n.current.setCenter(a),function(e){if("user"!==(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"user"))return new google.maps.Marker({position:e,map:n.current,icon:ASSETS.storeMarker});c?c.setPosition(e):o(new google.maps.Marker({position:e,map:n.current,icon:ASSETS.userMarker}))}(a))},[a]);e="where-to-buy__map-container",e=[e,t&&"".concat(e,"--active")].filter(function(e){return e}).join(" ");return React.createElement("div",{className:e},React.createElement("div",{className:"where-to-buy__map-info"},React.createElement("p",null,"Here are the closest stores and online shops that ships to your location.")),React.createElement("div",{className:"where-to-buy__map-left-container"},React.createElement(ResultCountSelector,null),React.createElement("div",{className:"where-to-buy__map-content"},React.createElement(PhysicalStores,null),React.createElement("div",{id:"where-to-buy__map",ref:r}))),React.createElement(OnlineStores,null))},AddressContainer=function(e){function t(){var e=r.current.getPlace();e.geometry?(e={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},a(e)):console.warn("User did not select a prediction")}var a=e.onPlaceChanged,r=React.useRef(),n=React.useRef(),e=_slicedToArray(React.useState(!1),2),c=e[0],o=e[1];React.useEffect(function(){r.current=new google.maps.places.Autocomplete(n.current,{componentRestrictions:{country:"ca"},fields:["geometry","name"],strictBounds:!1,types:[]}),r.current.addListener("place_changed",t)},[]),React.useEffect(function(){c&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){a({lat:e.coords.latitude,lng:e.coords.longitude})},function(){o(!1),console.error("Use of geolocation not allowed")}):console.warn("Navigator doesn't have geolocation"))},[c]);e="where-to-buy__location-button",e=[e,c&&"".concat(e,"--active")].filter(function(e){return e}).join(" ");return React.createElement("div",{className:"where-to-buy__address-container"},React.createElement("p",{className:"where-to-buy__autocomplete-cta"},"Start typing your address to find the nearest stores."),React.createElement("div",{className:"where-to-buy__autocomplete-container"},React.createElement("img",{className:"where-to-buy__pin",src:ASSETS.locationPin}),React.createElement("input",{id:"where-to-buy__autocomplete",placeholder:"Enter an address",type:"text",ref:n}),React.createElement("button",{id:"where-to-buy__location-button",className:e,onClick:function(){return o(function(e){return!e})}})))},WhereToBuy=function(){var e=_slicedToArray(React.useState(!1),2),t=e[0],a=e[1],r=_slicedToArray(React.useState(null),2),e=r[0],n=r[1];return React.createElement("div",{className:"where-to-buy"},React.createElement(AddressContainer,{onPlaceChanged:function(e){n(e),a(!0)}}),React.createElement(MapContainer,{isMapActive:t,userLocation:e}))},domContainer=document.querySelector("#where-to-buy__react");ReactDOM.render(React.createElement(WhereToBuy),domContainer);var MAP_STYLES=[{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{stylers:[{hue:"#00aaff"},{saturation:-100},{gamma:2.15},{lightness:12}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{visibility:"on"},{lightness:24}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:57}]}];