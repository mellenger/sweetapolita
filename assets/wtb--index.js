var H=Object.defineProperty,V=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var R=(o,e,t)=>e in o?H(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,M=(o,e)=>{for(var t in e||(e={}))J.call(e,t)&&R(o,t,e[t]);if(k)for(var t of k(e))X.call(e,t)&&R(o,t,e[t]);return o},b=(o,e)=>V(o,z(e));import{j as O,r as A,R as _,a as Z}from"./wtb--vendor.js?time=1639588430877";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};q();var $="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAYAAACEYr13AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFUSURBVHgBlVQxTsNAEJw9UVBQGESBBEhpkSiSghbJ8ABESZUnEL8A/8B+AUp+wAsSiZIGS5SAcEFBhzsoEMfe2kSxb53EI528t7czt97bO0IL7GjW548bBY+c0jDT4qhBCkC/I3Zf8zRoxOawdkLpeawKMLkHsjM2e1gOFqKQM8rnAh3IiyIDFimMTA1uOpAhsQaJZFDt/qaG7WwCXz/l0GBpe4N/4kJdvDoCTvZK+/4duHv2YwhDAytHVYcj/pMdTg+A410lA/QN2lJvYn9LDdUFXgrf9/ChRRauBn6HvbLA7ROnfih5Sg0+v306c6nsPjmFAN0gDWVcM7ARoTModt0oNWBjDKJ4ba5lchJOhFvzR9Mxf4YryClvOM+YvPVo+ggovVEio+RssOgwyg4hXIF8uKJdNp2eQFXUpkjtCtfi0QJ5kcorjoqcoSvcTa2etlb8AWhsc7h/I72KAAAAAElFTkSuQmCC";const G=[1e4,25e3,5e4,1e5],ee={lat:49.28323201694063,lng:-123.12089349382718},K=["Canada","United States"],te="https://sweetapolita-wtb.uc.r.appspot.com",re="B7pabUSVAgMBAAECggaBIboEAJQjp3KkOFQuVbvJIJj",oe=[{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{stylers:[{hue:"#00aaff"},{saturation:-100},{gamma:2.15},{lightness:12}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{visibility:"on"},{lightness:24}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:57}]}],U={AD:"Europe",AE:"Asia",AF:"Asia",AG:"North America",AI:"North America",AL:"Europe",AM:"Asia",AN:"North America",AO:"Africa",AQ:"Antarctica",AR:"South America",AS:"Australia",AT:"Europe",AU:"Australia",AW:"North America",AZ:"Asia",BA:"Europe",BB:"North America",BD:"Asia",BE:"Europe",BF:"Africa",BG:"Europe",BH:"Asia",BI:"Africa",BJ:"Africa",BM:"North America",BN:"Asia",BO:"South America",BR:"South America",BS:"North America",BT:"Asia",BW:"Africa",BY:"Europe",BZ:"North America",CA:"North America",CC:"Asia",CD:"Africa",CF:"Africa",CG:"Africa",CH:"Europe",CI:"Africa",CK:"Australia",CL:"South America",CM:"Africa",CN:"Asia",CO:"South America",CR:"North America",CU:"North America",CV:"Africa",CX:"Asia",CY:"Asia",CZ:"Europe",DE:"Europe",DJ:"Africa",DK:"Europe",DM:"North America",DO:"North America",DZ:"Africa",EC:"South America",EE:"Europe",EG:"Africa",EH:"Africa",ER:"Africa",ES:"Europe",ET:"Africa",FI:"Europe",FJ:"Australia",FK:"South America",FM:"Australia",FO:"Europe",FR:"Europe",GA:"Africa",GB:"Europe",GD:"North America",GE:"Asia",GF:"South America",GG:"Europe",GH:"Africa",GI:"Europe",GL:"North America",GM:"Africa",GN:"Africa",GP:"North America",GQ:"Africa",GR:"Europe",GS:"Antarctica",GT:"North America",GU:"Australia",GW:"Africa",GY:"South America",HK:"Asia",HN:"North America",HR:"Europe",HT:"North America",HU:"Europe",ID:"Asia",IE:"Europe",IL:"Asia",IM:"Europe",IN:"Asia",IO:"Asia",IQ:"Asia",IR:"Asia",IS:"Europe",IT:"Europe",JE:"Europe",JM:"North America",JO:"Asia",JP:"Asia",KE:"Africa",KG:"Asia",KH:"Asia",KI:"Australia",KM:"Africa",KN:"North America",KP:"Asia",KR:"Asia",KW:"Asia",KY:"North America",KZ:"Asia",LA:"Asia",LB:"Asia",LC:"North America",LI:"Europe",LK:"Asia",LR:"Africa",LS:"Africa",LT:"Europe",LU:"Europe",LV:"Europe",LY:"Africa",MA:"Africa",MC:"Europe",MD:"Europe",ME:"Europe",MG:"Africa",MH:"Australia",MK:"Europe",ML:"Africa",MM:"Asia",MN:"Asia",MO:"Asia",MP:"Australia",MQ:"North America",MR:"Africa",MS:"North America",MT:"Europe",MU:"Africa",MV:"Asia",MW:"Africa",MX:"North America",MY:"Asia",MZ:"Africa",NA:"Africa",NC:"Australia",NE:"Africa",NF:"Australia",NG:"Africa",NI:"North America",NL:"Europe",NO:"Europe",NP:"Asia",NR:"Australia",NU:"Australia",NZ:"Australia",OM:"Asia",PA:"North America",PE:"South America",PF:"Australia",PG:"Australia",PH:"Asia",PK:"Asia",PL:"Europe",PM:"North America",PN:"Australia",PR:"North America",PS:"Asia",PT:"Europe",PW:"Australia",PY:"South America",QA:"Asia",RE:"Africa",RO:"Europe",RS:"Europe",RU:"Europe",RW:"Africa",SA:"Asia",SB:"Australia",SC:"Africa",SD:"Africa",SE:"Europe",SG:"Asia",SH:"Africa",SI:"Europe",SJ:"Europe",SK:"Europe",SL:"Africa",SM:"Europe",SN:"Africa",SO:"Africa",SR:"South America",ST:"Africa",SV:"North America",SY:"Asia",SZ:"Africa",TC:"North America",TD:"Africa",TF:"Antarctica",TG:"Africa",TH:"Asia",TJ:"Asia",TK:"Australia",TM:"Asia",TN:"Africa",TO:"Australia",TR:"Asia",TT:"North America",TV:"Australia",TW:"Asia",TZ:"Africa",UA:"Europe",UG:"Africa",US:"North America",UY:"South America",UZ:"Asia",VC:"North America",VE:"South America",VG:"North America",VI:"North America",VN:"Asia",VU:"Australia",WF:"Australia",WS:"Australia",YE:"Asia",YT:"Africa",ZA:"Africa",ZM:"Africa",ZW:"Africa"},Y=o=>{var t;const e=o.filter(i=>i.types.includes("country"));if(e){const i=e[0].short_name,r=(t=U[i])!=null?t:"";return b(M({},e[0]),{continent:r})}},x=o=>{var r;const e=o.split(","),t=(r=e.shift())==null?void 0:r.trim(),i=e.join(",");return[t,i]},w=o=>{let e;try{e=new URL(o)}catch{e={hostname:o.split("/")[0]}}return e.hostname.replace("www.","")},L=(o,e,t="s")=>`${o} ${e}${o!==1?t:""}`,ae=async o=>{const t=await j({country:o});return t.success&&typeof t.body!="string"?t.body:(console.error(t.body),!1)},se=async(o,e,t=!1)=>{var a,u,d;const i={coordinates:o.coordinates,country:(a=o.country)==null?void 0:a.long_name,range:e,retailOnly:t};((u=o.country)==null?void 0:u.short_name)&&!K.includes(o.country.long_name)&&(i.continent=U[(d=o.country)==null?void 0:d.short_name]);const r=await j(i);return r.success&&typeof r.body!="string"?r.body:(console.error(r.body),!1)},j=async o=>await(await fetch(`${te}/coords`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b(M({},o),{accessToken:re}))})).json(),ne="_WTB_kvjv1_2",ie="_WTBAutocompleteCta_kvjv1_7",ce="_WTBAddressContainer_kvjv1_11",Ae="_WTBAutocompleteInputWrapper_kvjv1_16",le="_WTBAutocompleteContainer_kvjv1_20",ue="_WTBPin_kvjv1_27",pe="_WTBLocationButton_kvjv1_37",de="_WTBLocationButtonActive_kvjv1_53",fe="_WTBTabBar_kvjv1_60",he="_WTBTabActive_kvjv1_80",me="_WTBMapContainer_kvjv1_84",Be="_WTBMapContainerActive_kvjv1_87",Te="_WTBMapPhysicalStores_kvjv1_110",Se="_WTBPhysicalStore_kvjv1_118",ge="_WTBPhysicalStoreSelected_kvjv1_133",ye="_WTBPhysicalStoreAddress_kvjv1_136",ve="_WTBPhysicalStoreDistance_kvjv1_141",Ee="_WTBOnlineTitleRow_kvjv1_144",Ne="_WTBOnlineStores_kvjv1_150",We="_WTBOnlineStore_kvjv1_150",Ce="_WTBMap_kvjv1_84";var c={WTB:ne,WTBAutocompleteCta:ie,WTBAddressContainer:ce,WTBAutocompleteInputWrapper:Ae,WTBAutocompleteContainer:le,WTBPin:ue,WTBLocationButton:pe,WTBLocationButtonActive:de,WTBTabBar:fe,WTBTabActive:he,WTBMapContainer:me,WTBMapContainerActive:Be,WTBMapPhysicalStores:Te,WTBPhysicalStore:Se,WTBPhysicalStoreSelected:ge,WTBPhysicalStoreAddress:ye,WTBPhysicalStoreDistance:ve,WTBOnlineTitleRow:Ee,WTBOnlineStores:Ne,WTBOnlineStore:We,WTBMap:Ce};const l=O.exports.jsx,m=O.exports.jsxs,Me=({value:o,onChange:e})=>l("select",{name:"",onChange:t=>e(parseInt(t.target.value)),value:o,children:G.map((t,i)=>m("option",{value:t,children:[t/1e3," km"]},i))}),be=({isMapActive:o,onPlaceChanged:e,onRangeChange:t,range:i})=>{const r=A.exports.useRef(),a=A.exports.useRef(null),u=A.exports.useRef(),[d,B]=A.exports.useState(!0),N=()=>{var g,v,y;const f=(g=r.current)==null?void 0:g.getPlace();if(f&&f.geometry){const s=f.address_components?Y(f.address_components):void 0,p={coordinates:{lat:(v=f.geometry.location)==null?void 0:v.lat(),lng:(y=f.geometry.location)==null?void 0:y.lng()},country:s};B(!1),e(p)}else console.warn("User did not select a prediction")},T=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(f=>{var v;const g={lat:f.coords.latitude,lng:f.coords.longitude};(v=u.current)==null||v.geocode({location:g}).then(y=>{(!y||!y.results||!y.results.length)&&e({coordinates:g,country:void 0});const s=y.results[0];if(s.address_components){const p=Y(s.address_components);a.current&&(a.current.value=s.formatted_address),e({coordinates:g,country:p})}else e({coordinates:g,country:void 0})})},()=>{B(!1),console.error("Use of geolocation not allowed")}):console.warn("Navigator doesn't have geolocation")};A.exports.useEffect(()=>{a.current&&(r.current=new google.maps.places.Autocomplete(a.current,{fields:["geometry","name","address_component"],strictBounds:!1,types:[]}),r.current.addListener("place_changed",N)),u.current=new google.maps.Geocoder},[]),A.exports.useEffect(()=>{d&&T()},[d]);const S=[c.WTBLocationButton,d&&c.WTBLocationButtonActive].filter(f=>f).join(" ");return l("div",{className:c.WTBAddressContainer,children:m("div",{className:c.WTBAutocompleteContainer,children:[l(Me,{onChange:t,value:i}),m("div",{className:c.WTBAutocompleteInputWrapper,children:[l("img",{className:c.WTBPin,src:$}),l("input",{id:"where-to-buy__autocomplete",placeholder:"Enter an address",type:"text",ref:a})]}),l("button",{id:"where-to-buy__location-button",className:S,onClick:()=>B(f=>!f)})]})})},we=({onStoreSelected:o,physicalStores:e,selectedStore:t})=>{const i=A.exports.useRef([]);return A.exports.useEffect(()=>{t!==null&&i.current[t].scrollIntoView({behavior:"smooth",block:"nearest"})},[t]),e&&e.length?l("ul",{className:c.WTBMapPhysicalStores,children:e.map((r,a)=>{var T;const u=[c.WTBPhysicalStore,t===a&&c.WTBPhysicalStoreSelected].filter(S=>S).join(" "),[d,B]=x(r.address),N=w((T=r.website)!=null?T:"");return m("li",{className:u,onClick:()=>o(a),ref:S=>S&&(i.current[a]=S),children:[l("h4",{children:r.name}),m("p",{className:c.WTBPhysicalStoreAddress,children:[d,l("br",{}),B]}),r.website&&l("a",{href:r.website,target:"_blank",className:c.WTBPhysicalStoreAddress,children:N}),m("p",{className:c.WTBPhysicalStoreDistance,children:[(r.distance/1e3).toFixed(1),"km"]})]},a)})}):l("div",{children:l("h4",{children:"No stores found for the current search."})})};var Ie="data:image/png;base64,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",Pe="data:image/png;base64,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";const ke=({isMapActive:o,physicalStores:e,userLocation:t})=>{const i=A.exports.useRef(null),r=A.exports.useRef(),[a,u]=A.exports.useState(null),[d,B]=A.exports.useState([]),[N,T]=A.exports.useState([]),[S,f]=A.exports.useState(null),g=(s,p="user")=>new google.maps.Marker({position:s,map:r.current,icon:p==="user"?Ie:Pe}),v=s=>{var E;f(s),N.map(n=>n.close());const p=d[s];N[s].open({anchor:p,map:r.current,shouldFocus:!0});const h=p.getPosition();h&&((E=r.current)==null||E.panTo({lat:h.lat(),lng:h.lng()}))};A.exports.useEffect(()=>{i.current&&(r.current=new google.maps.Map(i.current,{zoom:12,center:ee,styles:oe,disableDefaultUI:!0,zoomControl:!0,controlSize:30}))},[]),A.exports.useEffect(()=>{var s;t&&((s=r.current)==null||s.panTo(t.coordinates),a?a.setPosition(t.coordinates):u(g(t.coordinates)))},[t]),A.exports.useEffect(()=>{var s;if(e&&(f(null),d.map(p=>p.setMap(null)),e.length)){const p=new google.maps.LatLngBounds;t&&p.extend(t.coordinates);const h=[],E=e.map(n=>{var I,P;p.extend(n.location);const W=new URLSearchParams({query:`${n.name} ${n.address} ${(I=n.country)!=null?I:""}`}),[C,Q]=x(n.address),D=w((P=n.website)!=null?P:"");return h.push(new google.maps.InfoWindow({content:`
                <div class="${c.WTBPhysicalStore}">
                  <h4>${n.name}</h4>
                  <a
                    class="${c.WTBPhysicalStoreAddress}"
                    target="_blank"
                    href="https://www.google.com/maps/search/?api=1&${W.toString()}"
                  >
                      ${C}<br/>${Q}
                  </a>
                  ${n.website?`<p><a
                    href="${n.website}"
                    target="_blank"
                    class="${c.WTBPhysicalStoreAddress}"
                  >
                    ${D}
                  </a></p>`:""}
                  <p class="${c.WTBPhysicalStoreDistance}">
                    ${(n.distance/1e3).toFixed(1)}km
                  </p>
                </div>`})),g(n.location,"store")});T(h),B(E),(s=r.current)==null||s.fitBounds(p)}},[e]),A.exports.useEffect(()=>{d&&d.length&&d.map((s,p)=>{s.addListener("click",()=>{v(p)})})},[d,N]);const y=[c.WTBMapContainer,o&&c.WTBMapContainerActive].filter(s=>s).join(" ");return m("div",{className:y,children:[l(we,{physicalStores:e,onStoreSelected:v,selectedStore:S}),l("div",{className:c.WTBMap,ref:i})]})},Re=({onlineStores:o})=>{var t,i,r,a;let e=(i=(t=o[0])==null?void 0:t.country)!=null?i:"";return K.includes(e)||(e=(a=(r=o[0])==null?void 0:r.continent)!=null?a:""),m("div",{className:c.WTBMapRightContainer,children:[l("div",{className:c.WTBOnlineTitleRow,children:e&&m("p",{children:["Online stores located in ",e]})}),m("div",{className:c.WTBOnlineStores,children:[o.map((u,d)=>{const B=w(u.website);return m("div",{className:c.WTBOnlineStore,children:[l("h4",{children:u.name}),u.website&&l("a",{href:u.website,children:B})]},d)}),m("div",{className:c.WTBOnlineStore,children:[l("h4",{children:"Sweetapolita"}),l("a",{href:"#",children:"sweetapolita.com"})]})]})]})};function Oe(){const[o,e]=A.exports.useState(!1),[t,i]=A.exports.useState(null),[r,a]=A.exports.useState([]),[u,d]=A.exports.useState([]),[B,N]=A.exports.useState(G[0]),[T,S]=A.exports.useState("store"),[f,g]=A.exports.useState(),v=s=>{i(s),e(!0)},y=(s,p=!1)=>{const h=[],E=[];s.retailStores.map(n=>{const W={lat:n.location.coordinates[1],lng:n.location.coordinates[0]};h.push({name:n.name,address:n.address,distance:n.distance,location:W,country:n.country,website:n.website})}),s.onlineStores.map(n=>{var W,C;E.push({name:n.name,address:n.address,country:n.country,website:(W=n.website)!=null?W:"",continent:(C=n.continent)!=null?C:""})}),a(h),p&&d(E)};return A.exports.useEffect(()=>{var p;const s=window.wtbDefaultCountry;if(t){const h=f!==((p=t.country)==null?void 0:p.long_name);se(t,B,!h).then(E=>{var n;E&&y(E,h),h&&g((n=t.country)==null?void 0:n.long_name)})}else f===void 0&&s!==void 0&&ae(s).then(h=>{h&&(y(h,!0),g(s))})},[t,B]),A.exports.useEffect(()=>{r.length===0&&T==="store"&&S("online"),r.length>0&&T==="online"&&S("store")},[r]),m("div",{className:c.WTB,children:[l(be,{onPlaceChanged:v,isMapActive:o,range:B,onRangeChange:s=>N(s)}),m("div",{className:c.WTBTabBar,children:[l("button",{disabled:r.length===0,onClick:()=>S("store"),className:T==="store"?c.WTBTabActive:"",children:L(r.length,"Retailer")}),l("button",{onClick:()=>S("online"),className:T==="online"?c.WTBTabActive:"",children:L(u.length+1,"Online Store")})]}),T=="store"&&l(ke,{isMapActive:o,userLocation:t,physicalStores:r}),T=="online"&&l(Re,{onlineStores:u})]})}const F=()=>{typeof google!="undefined"?_.render(l(Z.StrictMode,{children:l(Oe,{})}),document.getElementById("wtb")):(console.log("Waiting for google to create app"),window.setTimeout(F,500))};F();
