var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&i(e,a,t[a]);return e},c=(e,l)=>t(e,a(l));import{c as s,d,p as m,r as u,a as p,R as _,g as f,u as h,T as v,N as g,b as y,e as E,f as b,L as x,h as N,C,s as k,H as $,S as w,i as S,j as P,I,A as T,k as q,l as B}from"./bab--vendor.js?time=1651076450512";const M="ca"!=window.location.origin.split(".").pop();var F={shopifyUrl:M?"https://sweetapolita.myshopify.com/api/2021-04/graphql.json":"https://sweetapolita-canada.myshopify.com/api/2021-04/graphql.json",shopifyAccessToken:M?"a768d0c2f5249bad9fd9d9454719be25":"dd5129155b9df3874579f29526e46e91",variantIdentifier:"2oz Bottle",boxProductId:M?7289297141926:6757911789764,boxProductHandle:"build-a-box",messageProductId:M?42324403978406:41253345820868};const A={closePreview:!1,activeModal:!1,loadedModal:!1,productBasePrice:9,searchQuery:{unfiltered:"",filtered:""},activeFilters:[],autofillTheme:"",filterQuery:"",price:0,box:{id:null,name:"",capacity:0,price:0},items:[],messagePrice:5,message:{to:"",note:"",skip:!1}},D=s(d(m((e=>c(o({},A),{setClosePreview:(t=!0)=>{e((e=>({closePreview:t})))},setTo:t=>{e((e=>({message:c(o({},e.message),{to:t})})))},setActiveModal:t=>{e((e=>({activeModal:t})))},setLoadedModal:t=>{e((e=>({loadedModal:t})))},setAutofillTheme:t=>{e((e=>({autofillTheme:t})))},setBasePrice:t=>{e((e=>({productBasePrice:t})))},setMessage:t=>{e((e=>({message:c(o({},e.message),{note:t})})))},setSkip:t=>{e((e=>({message:c(o({},e.message),{skip:t})})))},searchString:e=>String(e).trim().toLowerCase().replace(/[^a-z]/gi,"-"),updateSearch:t=>{e((e=>({searchQuery:{unfiltered:t,filtered:e.searchString(t)}})))},updateFilters:t=>{e((e=>({activeFilters:t})))},updatePrice:t=>{e((e=>{let a=0;return e.items.forEach((e=>{const l=t.products.edges.find((t=>t.node.variants.edges[0].node.id===e));a+=Number(l.node.variants.edges[0].node.price)})),a+=e.message.skip||""==e.message.to&&""==e.message.note?0:e.messagePrice,{price:a}}))},setBox:(t,a)=>{const l=Number(t.node.title.split(" ").shift());e((e=>{let r=[...e.items];return e.items.length>l&&(r=e.items.slice(0,l)),{items:r,box:{id:t.node.id,capacity:l,name:t.node.title,price:l*a}}}))},addItem:t=>{e((e=>({items:[...e.items,t]})))},addItems:t=>{e((e=>({items:[...e.items,t]})))},removeItems:()=>{e((e=>({items:[]})))},removeItem:t=>{e((e=>{const a=[...e.items];return a.splice(t,1),{items:a}}))},removeItemById:t=>{e((e=>{const a=e.items.indexOf(t),l=[...e.items];return-1!=a&&l.splice(a,1),{items:l}}))},clearData:()=>{e((e=>o({},A)))},addBoxToCart:t=>{e((e=>{const a=Theme.uuid();let l=[],r={};e.items.forEach((e=>{const n=Theme.decyptyBase64(e),i=t.data.products.edges.find((t=>t.node.variants.edges[0].node.id==e)).node.title;if(l.some((e=>e.id==n))){l.find((e=>e.id==n)).quantity+=1,r[i]+=1}else l.push({id:n,quantity:1,properties:{_hide:!0,_boxId:a,_boxItem:!0}}),r[i]=1}));let n={},i=[];e.message.skip||(n._messageTo=e.message.to,n._messageNote=e.message.note,i.push({id:F.messageProductId,quantity:1,properties:c(o({},n),{_hide:!0,_boxId:a,_boxItem:!0})}));const s=[...l,...i,{id:Theme.decyptyBase64(e.box.id),quantity:1,properties:o(o({_boxId:a,_boxProduct:!0},n),r)}];return CartJS.addItems(s,{success:t=>{window.location.replace("/cart"),e.clearData()},error:e=>{alert("There was a problem adding your box to the cart.")}}),(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(JSON.stringify(s)),{}}))}})),{name:"bab-store",getStorage:()=>sessionStorage})));var L="_container_r43o9_3",O="_col_r43o9_14",R="_leftCol_r43o9_24",H="_leftColInner_r43o9_49",Q="_leftColSticky_r43o9_77",z="_leftColStickyActive_r43o9_88",W="_headerExists_r43o9_95",V="_leftToggle_r43o9_112",j="_leftToggleOpen_r43o9_122",G="_rightCol_r43o9_126",U="_rightColInner_r43o9_142";const Y=e=>[e.closePreview],X=e=>[e.setClosePreview];function J({title:e,leftColumn:t,stickyLeftColumn:a=!1,rightColumn:l}){const r=u.exports.useMediaQuery({query:"(min-width: 960px)"}),[n]=D(Y),[i]=D(X),o=p.exports.useRef(0),c=p.exports.useRef(0),s=p.exports.useRef(0),d=document.querySelector("#header"),m=()=>{var e,t;return(null==(e=c.current)?void 0:e.offsetHeight)-(null==(t=s.current)?void 0:t.offsetHeight)};return p.exports.useEffect((()=>{n&&o.current.scroll({top:m()})}),[]),_.createElement("div",{className:`${L} ${d?W:""}`,onScroll:e=>{return t=e.target,void(!n&&!r&&t.scrollTop>=m()?i(!0):n&&!r&&t.scrollTop<m()&&i(!1));var t},ref:o},r||a?_.createElement("div",{className:`${O} ${R}`},_.createElement("div",{className:`${H}`,ref:c},a&&!r&&_.createElement("h2",{className:"h1 title-font color-primary center"},e),t),a&&!r?_.createElement("div",{className:`${Q} ${n?z:""}`,ref:s},n&&_.createElement("h2",{className:"h6 title-font color-primary"},e),n?a:"",_.createElement("a",{className:`${V} ${n?"":j} icon icon-chevron-down`,onClick:e=>{var t;null==(t=o.current)||t.scroll({top:n?0:m(),behavior:"smooth"})}},"Preview")):""):"",_.createElement("div",{className:`${O} ${G}`},_.createElement("div",{className:U},!a||r&&_.createElement("h2",{className:"h4 title-font color-primary"},e),l)))}var K={card:"_card_1aslt_2",title:"_title_1aslt_7",image:"_image_1aslt_11",quantity:"_quantity_1aslt_20",addSolo:"_addSolo_1aslt_42",premium:"_premium_1aslt_50",footer:"_footer_1aslt_55",button:"_button_1aslt_66",buttonAdd:"_buttonAdd_1aslt_70"};const Z=[{key:"color",title:"Color",fields:[{field:"color_contains_red",name:"Red"},{field:"color_contains_pink",name:"Pink"},{field:"color_contains_orange",name:"Orange"},{field:"color_contains_yellow",name:"Yellow"},{field:"color_contains_green",name:"Green"},{field:"color_contains_blue",name:"Blue"},{field:"color_contains_purple",name:"Purple"},{field:"color_contains_white",name:"White"},{field:"color_contains_black",name:"Black"},{field:"color_contains_metallic",name:"Metallic"},{field:"color_contains_rainbow",name:"Rainbow"},{field:"color_contains_pastel",name:"Pastel"}]},{key:"speciality",title:"Dietary",fields:[{field:"vegan",name:"Vegan + Gluten-Free"},{field:"gluten_free",name:"Gluten Free"},{field:"kosher",name:"Kosher"},{field:"dairy_kosher",name:"Dairy Kosher"},{field:"vegetarian",name:"Vegetarian"}]}];let ee="";Z.map((e=>{e.fields.map((t=>{"color"==e.key&&(ee+=`\n            filter__${t.field}: metafield(namespace: "custom_fields", key: "${t.field}") {\n              value\n            }\n      `)}))}));const te=f`
  query GetAllProducts($query: String!) {
    products(first: 50, query: $query) {
      edges {
        node {
          id
          title
          handle
          availableForSale
          themeColor: metafield(namespace: "custom_fields", key: "theme") {
            value
          }
          variants(first: 1) {
            edges {
              node {
                price
                title
                id
                quantityAvailable
                availableForSale
                image {
                  transformedSrc(maxWidth: 263, maxHeight: 323, crop: CENTER, preferredContentType: WEBP)
                }
              }
            }
          }
          tags
          collections(first: 50) {
            edges {
              node {
                title
                handle
              }
            }
          }
          ${ee}
        }
      }
    }
  }
`,ae=f`
  query BoxVariants($boxquery: String!) {
    boxProducts: products(first: 1, query: $boxquery) {
      edges {
        node {
          id
          title
          variants(first: 10) {
            edges {
              node {
                id
                title
                image {
                  transformedSrc(maxWidth: 800, crop: CENTER, preferredContentType: WEBP)
                }
              }
            }
          }
          autofillCollections: metafield(namespace: "custom_fields", key: "bab_autofill_collections") {
            value
          }
        }
      }
    }
  }
`,le=f`
  query ProductDetails($handle: String!) {
    productByHandle(handle: $handle) {
      title
      description
      images(first: 3) {
        edges {
          node {
            transformedSrc(maxWidth: 263, maxHeight: 323, crop: CENTER, preferredContentType: WEBP)
          }
        }
      }
    }
  }
`;var re={modal:"_modal_13lms_2",modalActive:"_modalActive_13lms_15",modalInner:"_modalInner_13lms_18",add:"_add_13lms_43",left:"_left_13lms_48",right:"_right_13lms_49",galleryList:"_galleryList_13lms_65",premium:"_premium_13lms_84"};function ne({handle:e,variant:t,quantitySet:a,theme:l,premium:r,closeModal:n,addItem:i,loadedCallback:o}){const c=t.quantityAvailable>a,s=h(le,{variables:{handle:e,query:`variant:edges:node:title:${F.variantIdentifier}*`},onCompleted:()=>{setTimeout((()=>{o()}),200)}}),d=e=>{Array.prototype.indexOf.call(e.target.parentNode.parentNode.childNodes,e.target.parentNode),e.target.parentNode.parentNode.previousSibling.src=e.target.src},m=p.exports.useRef(0);return _.createElement("div",{className:`${re.modal} ${s.data?re.modalActive:""}`,ref:m,"data-theme":l,onClick:()=>{m.current.classList.remove(re.modalActive),setTimeout((()=>{n()}),500)}},_.createElement("div",{className:`${re.modalInner}`,onClick:e=>e.stopPropagation()},s.data?_.createElement(_.Fragment,null,_.createElement("div",{className:`${re.left}`},_.createElement("div",{className:re.gallery},_.createElement("img",{className:re.galleryMain,src:s.data.productByHandle.images.edges[0].node.transformedSrc,alt:s.data.productByHandle.title}),s.data.productByHandle.images.edges.length>1?_.createElement("ul",{className:re.galleryList},s.data.productByHandle.images.edges.map(((e,t)=>_.createElement("li",{key:t,onClick:d},_.createElement("img",{src:e.node.transformedSrc,alt:s.data.productByHandle.title}))))):"")),_.createElement("div",{className:`color-grey-3 ${re.right}`},_.createElement("h2",{className:"color-primary"},s.data.productByHandle.title),t.title&&_.createElement("p",null,t.title),s.data.productByHandle.description&&_.createElement(v,{line:6,text:s.data.productByHandle.description,element:"p"}),c&&_.createElement("a",{className:`b b--block ${re.add}`,onClick:()=>{i(),setTimeout((()=>n()),300)}},"Add to Box",r?_.createElement("span",{className:re.premium},_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"+$",value:r})):""))):""))}function ie({variant:e,title:t,handle:a,imageUrl:l,premium:r,theme:n=!1,addItem:i,removeItem:o,quantitySet:c}){const[s,d]=p.exports.useState(0),[m,u]=p.exports.useState(0),f=e.quantityAvailable>c;return _.createElement(_.Fragment,null,_.createElement("div",{className:`${K.card} ${c?K.cardActive:""}`,"data-theme":n},_.createElement("div",{className:K.image,onClick:e=>{e.stopPropagation(),d(!0)}},r?_.createElement("div",{className:K.premiumTag},"With Bling!"):"",_.createElement("img",{src:l,alt:t})),_.createElement("h3",{className:`${K.title} color-primary`},t),_.createElement("div",{className:K.footer},c?_.createElement("div",{className:`quantity-field quantity-field--static ${K.quantity}`},_.createElement("div",{className:"quantity-field__inner"},f&&_.createElement("span",{className:"quantity-field__add icon icon-plus",onClick:i}),_.createElement("input",{className:"quantity-field__field",type:"number",value:c,disabled:!0}),_.createElement("span",{className:"quantity-field__sub icon icon-minus",onClick:o}))):"",c?"":_.createElement("button",{onClick:i,className:`b b--block b--small ${K.button} ${K.buttonAdd}`},"Add to Box",r?_.createElement("span",{className:K.premium},_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"+$",value:r,decimalScale:2,fixedDecimalScale:!1})):""),_.createElement("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:`b b--block b--outline b--small ${K.button}`},s&&!m?"Loading":"Quick View"))),s?_.createElement(ne,{quantitySet:c,handle:a,variant:e,theme:n,premium:r,closeModal:()=>{d(!1),u(!1)},addItem:i,loadedCallback:()=>{u(!0)}}):"")}var oe={box:"_box_i7uuy_2",boxContainer:"_boxContainer_i7uuy_41",large:"_large_i7uuy_74",tooltip:"_tooltip_i7uuy_116",show:"_show_i7uuy_126",row:"_row_i7uuy_140",rowMutiple:"_rowMutiple_i7uuy_147"};var ce="_item_16hiu_2",se="_itemLarge_16hiu_27",de="_itemInner_16hiu_79",me="_itemFill_16hiu_142",ue="_itemActive_16hiu_156";function pe({img:e,filled:t,premium:a,product:l,callback:r,large:n}){const i=u.exports.useMediaQuery({query:"(min-width: 960px)"}),o=!!t&&`<p>${l.title}</p>\n    ${a?`<p class="color-grey-1">Premium +$${(Math.round(100*a)/100).toFixed(2)}</p>`:""}`,[c,s]=p.exports.useState(0);return _.createElement("span",{className:`${ce} ${t?ue:""} ${n?se:""}`,onClick:e=>{i?r(e):(s(c+1),c>=1&&(r(e),s(0)))},onMouseLeave:e=>{i||s(0)},"data-tip":o,"data-tip-disable":!t},_.createElement("span",{className:de},_.createElement("span",{className:`${me}`,style:{backgroundImage:e?`url(${e})`:""}})))}const _e=e=>[e.productBasePrice];var fe=_.memo((function({boxVariant:e,items:t,itemData:a,itemCallback:l=(()=>{})}){const[r]=D(_e),n=u.exports.useMediaQuery({query:"(min-width: 960px)"}),i=[],o=[...Array(e.capacity).fill(1)];for(let c=0;c<e.capacity;c+=9){let e=o.slice(c,c+9);i.push(e)}return _.createElement(_.Fragment,null,_.createElement("div",{className:`${oe.row} ${i.length>1?oe.rowMutiple:""}`},i.map(((e,o)=>{let c=t.length-9*o;c=c>9?9:c;const s=o==Math.floor(t.length/9);return i.length>1&&s&&((e,t=!0)=>{setTimeout((()=>{document.querySelector(`.${oe.boxContainer}:nth-child(${e+1}) .${oe.box}`).click()}),t?500:0)})(o),_.createElement("div",{key:o,className:`${oe.boxContainer} ${9==e.length?oe.boxContainerLarge:""}`},_.createElement(y,{effect:"solid",multiline:!0,html:!0,offset:{top:30},className:oe.tooltip}),_.createElement("div",{className:`${oe.box} ${s?oe.boxActive:""} ${9==e.length?oe.large:""}`,onClick:e=>{i.length>1&&(e=>{const t=Array.prototype.indexOf.call(e.parentNode.parentNode.childNodes,e.parentNode);let a=`translateX(-${100*t}%)`;e.classList.contains(`${oe.large}`)||(a=`translateX(calc(-${100*t}% - ${e.offsetWidth/4-(n?60:20)}px))`),e.parentNode.parentNode.style.transform=a})(e.target)},"data-filled":c},e.map(((n,i)=>{var c,s;let d=i+9*o,m=t[i+9*o],u=!!m&&(p=m,a.find((e=>e.node.variants.edges[0].node.id===p)).node);var p;let f=!!m&&(null==(c=u.variants)?void 0:c.edges[0].node.image.transformedSrc),h=(null==(s=u.variants)?void 0:s.edges[0].node.price)-r;return _.createElement(pe,{key:d,filled:m,premium:h,img:f,product:u,large:e.length>=9,callback:e=>{e.stopPropagation(),l(d)}})}))))}))))}));var he="_row_1wdpi_2",ve="_rowHide_1wdpi_12",ge="_select_1wdpi_38",ye="_button_1wdpi_43";function Ee({hide:e,callback:t,onChange:a,defaultValue:l}){return _.createElement("div",{className:`${he} ${e?ve:""}`},_.createElement("p",null,"Don’t know what to choose next? Auto-fill the rest!"),_.createElement("span",{className:"form-item form-item--primary"},_.createElement("select",{className:ge,name:"theme",defaultValue:l,onChange:e=>a(e.target.value)},_.createElement("option",{value:""},"Choose theme"),_.createElement("option",{value:"random"},"Random"))),_.createElement("a",{className:`b ${ye}`,onClick:e=>t()},"Auto-fill"))}var be={row:"_row_1vncu_2",rowSticky:"_rowSticky_1vncu_15",searchItem:"_searchItem_1vncu_35",filterItem:"_filterItem_1vncu_72",filterResults:"_filterResults_1vncu_80",filterResult:"_filterResult_1vncu_80",filterResultClear:"_filterResultClear_1vncu_110",filters:"_filters_1vncu_127",filtersOpenMobile:"_filtersOpenMobile_1vncu_145",filtersClose:"_filtersClose_1vncu_163",filtersInner:"_filtersInner_1vncu_175",filtersColumn:"_filtersColumn_1vncu_188",filtersField:"_filtersField_1vncu_191",circle:"_circle_1vncu_202",circleRed:"_circleRed_1vncu_213",circlePink:"_circlePink_1vncu_216",circleOrange:"_circleOrange_1vncu_219",circleYellow:"_circleYellow_1vncu_222",circleGreen:"_circleGreen_1vncu_225",circleBlue:"_circleBlue_1vncu_228",circlePurple:"_circlePurple_1vncu_231",circleWhite:"_circleWhite_1vncu_234",circleMetallic:"_circleMetallic_1vncu_238",circleRainbow:"_circleRainbow_1vncu_241"};function xe({sticky:e,searchQuery:t,searchCallback:a,searchClear:l,activeFilters:r,filterCallback:n}){const[i,o]=p.exports.useState(0),c=u.exports.useMediaQuery({query:"(min-width: 960px)"}),s=()=>{let e=[];document.querySelectorAll(`.${be.filters} input`).forEach((t=>{t.checked&&e.push({field:t.name,name:t.dataset.name,checked:t.checked,group:t.dataset.group})})),n(e)},d=()=>{o(!i)};return _.createElement("div",{className:`${be.row} ${e?be.rowSticky:""}`},_.createElement("div",{className:`form-item form-item--primary ${be.filterItem}`,onClick:e=>{c||d()}},_.createElement("select",{name:"filter",value:"",onChange:()=>{}},_.createElement("option",{value:""},"Filter")),_.createElement("div",{className:`${be.filters} ${i?be.filtersOpenMobile:""}`},_.createElement("i",{className:`icon icon-close color-grey-3 ${be.filtersClose}`,onClick:e=>{c||d()}}),_.createElement("div",{className:be.filtersInner},Z.map((e=>_.createElement("div",{key:e.key,className:be.filtersColumn},_.createElement("h3",null,e.title),e.fields.map(((t,a)=>{let l=!1;return r.map((e=>{l=e.field==t.field||l})),_.createElement("div",{key:a,className:`form-item form-item--checkbox ${be.filtersField}`},_.createElement("input",{id:`form-${t.field}`,type:"checkbox",onChange:s,name:t.field,checked:l,"data-name":t.name,"data-group":e.key}),"color"===e.key&&_.createElement("label",{htmlFor:`form-${t.field}`,className:`${be.circle} ${be[`circle${t.name}`]}`}),_.createElement("label",{htmlFor:`form-${t.field}`},t.name))})))))))),_.createElement("div",{className:`form-item form-item--primary ${be.searchItem}`},_.createElement("input",{type:"search",name:"search",placeholder:"Search...",onChange:a,value:t.unfiltered}),""!=t.filtered&&_.createElement("i",{className:"icon icon-close",onClick:l})),r.length>0?_.createElement("div",{className:be.filterResults},_.createElement("a",{className:`${be.filterResult} ${be.filterResultClear}`,onClick:()=>{n(r=[])}},"Clear",_.createElement("i",{className:"icon icon-close"})),r.map(((e,t)=>_.createElement("a",{key:t,className:be.filterResult,onClick:e=>{r.splice(t,1),n(r)}},e.name,_.createElement("i",{className:"icon icon-close"}))))):"")}var Ne={row:"_row_w82o8_2"};function Ce({count:e,capacity:t,showText:a=!1}){return _.createElement("div",{className:`${Ne.row}`},_.createElement("p",{className:Ne.count},e,"/",t),a&&0===e&&_.createElement("p",null,"Add sprinkles to the box!"),a&&e==t&&_.createElement("p",null,"Your box looks awesome!"))}var ke="_quantity_1n2r7_2",$e="_productGrid_1n2r7_24",we="_item_1n2r7_52",Se="_footer_1n2r7_60";const Pe=e=>[e.box,e.items,e.searchQuery,e.activeFilters,e.autofillTheme,e.productBasePrice],Ie=e=>[e.addItem,e.addItems,e.removeItem,e.removeItems,e.removeItemById,e.setBox,e.updatePrice,e.updateSearch,e.updateFilters,e.setAutofillTheme,e.searchString];function Te({screens:e,products:t,boxes:a}){var l,r,n,i,o,c,s;const[d,m,p,f,h,v]=D(Pe),[g,y,x,N,C,k,$,w,S,P,I]=D(Ie);let{prefilledBoxId:T,prefilledProductIds:q}=E();const B=u.exports.useMediaQuery({query:"(min-width: 960px)"});if(T&&q&&a.data){let t=q.split(",");N();let r=null==(l=a.data)?void 0:l.boxProducts.edges[0].node.variants.edges.find((e=>e.node.id===T));return k(r,v),y(t),_.createElement(b,{to:e[1].url})}const M=e=>{d.capacity>m.length&&(g(e),$(t.data))},A=e=>{S([]),w(e)};let L=[];t.data&&(L=t.data.products.edges,L=L.filter((e=>{var t,a;return(null==(a=null==(t=e.node)?void 0:t.variants)?void 0:a.edges[0].node).title==F.variantIdentifier})),f.length>0&&(L=L.filter((e=>{let t=!0;const a=e.node.tags.map((e=>String(e).toLowerCase().trim().replace(/-|\s/g,"_")));return f.map((l=>{"color"==l.group?t=!(!e.node[`filter__${l.field}`]||"1"!=e.node[`filter__${l.field}`].value)&&t:"speciality"==l.group&&(t=-1!=a.indexOf(l.field)&&t)})),t}))),""!=p.filtered&&(L=L.filter((e=>I(e.node.title).includes(p.filtered)))));const O={},R=null==(r=a.data)?void 0:r.boxProducts.edges[0].node.autofillCollections.value.split("|");null==(i=null==(n=t.data)?void 0:n.products)||i.edges.map((e=>{e.node.collections.edges.map((t=>{var a;if(-1!=(null==R?void 0:R.indexOf(t.node.handle))){const l=(null==(a=O[t.node.handle])?void 0:a.ids)?[...O[t.node.handle].ids,e.node.variants.edges[0].node.id]:[e.node.variants.edges[0].node.id];O[t.node.handle]={handle:t.node.handle,title:t.node.title,ids:l}}}))}));const H=(e=!1)=>_.createElement(xe,{sticky:e,searchQuery:p,searchClear:e=>{A("")},searchCallback:e=>{A(e.target.value)},activeFilters:f,filterCallback:e=>{return t=e,w(""),void S(t);var t}});return _.createElement(J,{title:"2. Choose Sprinkles",stickyLeftColumn:_.createElement(_.Fragment,null,_.createElement(Ce,{count:m.length,capacity:d.capacity}),!B&&H(!0)),leftColumn:_.createElement(_.Fragment,null,_.createElement("div",{className:`form-item form-item--primary ${ke}`},_.createElement("label",null,"Box Size"),_.createElement("select",{name:"box",value:d.id,onChange:e=>{(e=>{var l;if(e!==d.id){const r=null==(l=a.data)?void 0:l.boxProducts.edges[0].node.variants.edges.find((t=>t.node.id===e));k(r,v),$(t.data)}})(e.target.value)}},null==(o=a.data)?void 0:o.boxProducts.edges[0].node.variants.edges.map(((e,t)=>_.createElement("option",{key:t,value:e.node.id},e.node.title))))),(null==(s=null==(c=t.data)?void 0:c.products)?void 0:s.edges)?_.createElement(fe,{boxVariant:d,items:m,itemData:t.data.products.edges,itemCallback:e=>{x(e),$(t.data)}}):"",_.createElement("div",{className:Se},_.createElement(Ce,{count:m.length,capacity:d.capacity,showText:!0}),_.createElement(Ee,{options:O,callback:()=>{if(console.log(h),""!=h)if(O[h])for(let e=0;e<d.capacity-m.length;e++){const t=O[h].ids[Math.floor(Math.random()*O[h].ids.length)];setTimeout((()=>M(t)),125*e)}else if("random"==h)for(let e=0;e<d.capacity-m.length;e++){const t=L[Math.floor(Math.random()*L.length)].node.variants.edges[0].node.id;setTimeout((()=>M(t)),125*e)}},defaultValue:h,onChange:e=>P(e),hide:0===m.length||d.capacity==m.length}))),rightColumn:_.createElement(_.Fragment,null,H(),t.loading&&_.createElement("h4",{className:"center"},"Loading..."),t.error&&_.createElement("h4",{className:"center"},"There was an error loading your products."),_.createElement("div",{className:$e},0==(null==L?void 0:L.length)&&!t.loading&&_.createElement("p",{className:"center color-grey-3"},"There are no results."),(null==L?void 0:L.length)>0&&(null==L?void 0:L.map((e=>{var a,l,r;const n=null==(l=null==(a=e.node)?void 0:a.variants)?void 0:l.edges[0].node,i=(o=m,c=n.id,o.reduce(((e,t)=>t===c?e+1:e),0));var o,c;const s=n.price-v;return 0==n.quantityAvailable?null:_.createElement("div",{key:n.id,className:we},_.createElement(ie,{variant:n,title:e.node.title,handle:e.node.handle,imageUrl:n.image.transformedSrc,theme:null==(r=e.node.themeColor)?void 0:r.value,addItem:()=>{M(n.id)},removeItem:()=>{var e;e=n.id,C(e),$(t.data)},quantitySet:i,premium:s}))})))))})}var qe="_container_1h941_2",Be="_row_1h941_7",Me="_shadowItem_1h941_19",Fe="_item_1h941_34",Ae="_selected_1h941_49",De="_hide_1h941_54",Le="_button_1h941_59",Oe="_image_1h941_63";const Re=e=>[e.box,e.productBasePrice],He=e=>[e.setBox,e.updatePrice];function Qe({products:e,boxes:t}){var a,l;const[r,n]=D(Re),[i,o]=D(He);if(u.exports.useMediaQuery({query:"(min-width: 960px)"}),!t.data)return null;const c=(e=!1)=>{var a,l,n,i;(!1!==e||r.id)&&(!1===e&&r.id&&(e=null==(l=null==(a=t.data)?void 0:a.boxProducts.edges[0])?void 0:l.node.variants.edges.findIndex((e=>e.node.id===r.id))),document.querySelector(`.${Me}`).style.left=e/(null==(i=null==(n=t.data)?void 0:n.boxProducts.edges[0])?void 0:i.node.variants.edges.length)*100+"%")};return _.createElement("div",{className:qe},_.createElement("div",{className:"outer-container"},_.createElement("h2",{className:"h4 title-font color-primary"},"1. Select a Size"),_.createElement("div",{className:Be},_.createElement("div",{className:Me}),null==(l=null==(a=t.data)?void 0:a.boxProducts.edges[0])?void 0:l.node.variants.edges.map(((a,l)=>_.createElement("div",{key:l,className:`color-primary ${Fe} ${r.id===a.node.id?Ae:""}`,onClick:()=>(a=>{var l,c;if(a!==r.id){const r=null==(c=null==(l=t.data)?void 0:l.boxProducts.edges[0])?void 0:c.node.variants.edges.find((e=>e.node.id===a));i(r,n),o(e.data)}})(a.node.id),onMouseOver:()=>c(l),onMouseOut:()=>c()},_.createElement("div",{className:Oe},_.createElement("img",{src:a.node.image.transformedSrc,alt:a.node.title})),_.createElement("h2",null,a.node.title),_.createElement("p",null,"From",_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:" $",decimalScale:2,fixedDecimalScale:!0,value:Number(a.node.title.split(" ").shift())*n})),_.createElement(x,{className:`b b--black b--block ${Le} ${r.id!==a.node.id?De:""}`,to:"/products"},"Customize")))))))}var ze="_form_oz7dk_2",We="_skip_oz7dk_6";const Ve=e=>[e.setTo,e.setMessage,e.setSkip],je=e=>[e.message];function Ge({onChangeForm:e}){const[t]=D(je),[a,l,r]=D(Ve);return _.createElement("form",{className:ze},_.createElement("div",{className:"form-item form-item--primary"},_.createElement("label",{htmlFor:"message_to"},"To"),_.createElement("input",{type:"text",id:"message_to",name:"message_to",value:t.to,onChange:t=>{return l=t.target.value,a(l),void e();var l}})),_.createElement("div",{className:"form-item form-item--primary"},_.createElement("label",{htmlFor:"message_text"},"Message"),_.createElement("textarea",{name:"message_text",id:"message_text",cols:"30",rows:"10",placeholder:"Up to 120 characters",value:t.note,onChange:t=>{return a=t.target.value,l(a),void e();var a}})),_.createElement("div",{className:`form-item form-item--primary form-item--inline form-item--checkbox ${We}`},_.createElement("input",{type:"checkbox",name:"skip",id:"form-skip",onChange:t=>{return a=t.target.checked,r(a),void e();var a},checked:t.skip}),_.createElement("label",{htmlFor:"form-skip"},"Skip message")))}const Ue=e=>[e.box,e.items,e.messagePrice],Ye=e=>[e.updatePrice];function Xe({products:e}){var t,a;const[l,r,n]=D(Ue),[i]=D(Ye),o=u.exports.useMediaQuery({query:"(min-width: 960px)"});return _.createElement(J,{title:`3. Personalize a ${o?"gift ":""}message`,stickyLeftColumn:_.createElement(_.Fragment,null,_.createElement(Ce,{count:r.length,capacity:l.capacity})),leftColumn:_.createElement(_.Fragment,null,(null==(a=null==(t=e.data)?void 0:t.products)?void 0:a.edges)?_.createElement(fe,{boxVariant:l,items:r,itemData:e.data.products.edges}):""),rightColumn:_.createElement(_.Fragment,null,_.createElement("p",{className:"color-grey-3"},"Handwritten on a rainbow note card + sealed in an envelope."),_.createElement("p",{className:"color-grey-3"},_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"+$",decimalScale:2,fixedDecimalScale:!0,value:n}),", optional"),_.createElement(Ge,{onChangeForm:()=>i(e.data)}))})}var Je={table:"_table_h7sdp_2",tbody:"_tbody_h7sdp_16",th:"_th_h7sdp_21",td:"_td_h7sdp_21",tr:"_tr_h7sdp_52",premium:"_premium_h7sdp_59",note:"_note_h7sdp_64",alignLeft:"_alignLeft_h7sdp_72"};const Ke=e=>[e.price,e.productBasePrice,e.messagePrice];function Ze({products:e,items:t,message:a}){const[l,r,n]=D(Ke),i={};return t.forEach((t=>{var a,l,n,s;const d=null==(n=null==(l=null==(a=null==e?void 0:e.data)?void 0:a.products)?void 0:l.edges)?void 0:n.find((e=>{var a,l;return(null==(l=null==(a=e.node)?void 0:a.variants)?void 0:l.edges[0].node.id)===t}));i[t]=i[t]?c(o({},i[t]),{amount:i[t].amount+1}):{title:d.node.title,amount:1,premium:(null==(s=d.node.variants)?void 0:s.edges[0].node.price)-r}})),_.createElement("table",{className:Je.table},_.createElement("thead",{className:Je.thead},_.createElement("tr",{className:Je.tr},_.createElement("th",{className:Je.th},"Item"),_.createElement("th",{className:Je.th},"Qty"))),_.createElement("tbody",{className:Je.tbody},Object.values(i).map(((e,t)=>_.createElement("tr",{className:Je.tr,key:t},_.createElement("td",{className:Je.td},e.title,e.premium?_.createElement("span",{className:`color-grey-3 ${Je.premium}`},"Premium  ",_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"+$",decimalScale:2,fixedDecimalScale:!0,value:e.premium*e.amount})):""),_.createElement("td",{className:Je.td},e.amount)))),a.skip?null:_.createElement(_.Fragment,null,_.createElement("tr",{className:Je.tr},_.createElement("td",{className:Je.td,colSpan:"2"},_.createElement("hr",null))),_.createElement("tr",{className:Je.tr},_.createElement("td",{className:`${Je.td} ${Je.alignLeft}`,colSpan:"2"},"Personalized Gift Message",_.createElement("span",{className:`color-grey-3 ${Je.premium}`},_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"+$",decimalScale:2,fixedDecimalScale:!0,value:n})))),_.createElement("tr",{className:Je.tr},_.createElement("td",{className:`${Je.td} ${Je.note}`,colSpan:"2"},_.createElement("p",null,"To ",a.to),_.createElement("p",null,a.note))))),_.createElement("tfoot",null,_.createElement("tr",null,_.createElement("th",{className:Je.th},"Subtotal"),_.createElement("th",{className:Je.th},_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,value:l})))))}const et=e=>[e.box,e.items,e.message];function tt({products:e}){var t,a,l,r;const[n,i,o]=D(et);return _.createElement(J,{title:"4. Review Box",stickyLeftColumn:_.createElement(_.Fragment,null,_.createElement(Ce,{count:i.length,capacity:n.capacity})),leftColumn:_.createElement(_.Fragment,null,(null==(a=null==(t=null==e?void 0:e.data)?void 0:t.products)?void 0:a.edges)?_.createElement(fe,{boxVariant:n,items:i,itemData:null==(r=null==(l=null==e?void 0:e.data)?void 0:l.products)?void 0:r.edges}):""),rightColumn:_.createElement(_.Fragment,null,(null==e?void 0:e.data)?_.createElement(Ze,{products:e,box:n,items:i,message:o}):_.createElement("p",null,"Loading..."))})}var at="_container_i7g1m_2",lt="_active_i7g1m_76";const rt=e=>[e.box,e.price,e.items,e.message,e.productBasePrice];function nt({screens:e,addBoxToCart:t}){const a=u.exports.useMediaQuery({query:"(min-width: 960px)"}),[l,r,n,i,o]=D(rt),c=N(),s=t=>{let a=!1;return e.map(((e,l)=>{a=e.url===t?l:a})),a},d=e[s(c.pathname)-1],m=e[s(c.pathname)+1],p=c.pathname==e[1].url&&n.length<l.capacity,f=c.pathname==e[2].url&&(""==i.to||""==i.note)&&!i.skip;let h=!1;return n.length<l.capacity&&a&&(h=r+(l.capacity-n.length)*o),_.createElement("div",{className:`${at} ${"/"!=c.pathname?lt:""}`},_.createElement("span",null,l.name),_.createElement("span",null,h&&"Estimated"," Subtotal",_.createElement(g,{displayType:"text",thousandSeparator:!0,prefix:"$",decimalScale:2,fixedDecimalScale:!0,value:h||r})),_.createElement("span",null,_.createElement(x,{to:d?d.url:"/",disabled:!d,className:"b b--outline"},"Back"),m&&_.createElement(x,{to:m?m.url:[...e].pop().url,disabled:p||f,className:"b b--outline"},"Next"),!m&&_.createElement("a",{className:"b b--outline",onClick:t},"Add to Cart")))}var it={colors:"#FF71BE, #00CAC4, #FFB26D, #FFE550, #CCA2D7, #ACE0F9"};function ot(){const e=u.exports.useMediaQuery({query:"(min-width: 960px)"}),t={width:window.innerWidth,height:window.innerHeight},a=new Path2D("M0.8,12.3c0.3,0.3,0.6,0.6,0.9,0.8c0.4,0.2,0.8,0.3,1.2,0.4c0.4,0,0.8,0,1.2-0.1 c0.4-0.1,0.8-0.3,1.1-0.6c0,0,0.1-0.1,0.1-0.1c0,0,0,0.1,0,0.1c0.1,0.4,0.4,0.8,0.6,1.1c0.3,0.3,0.6,0.6,1,0.7 c0.4,0.2,0.8,0.3,1.2,0.3c0.4,0,0.8,0,1.2-0.2c0.4-0.1,0.8-0.4,1.1-0.6c0.3-0.3,0.6-0.6,0.7-1c0.2-0.4,0.3-0.8,0.3-1.2 c0-0.4,0-0.8-0.2-1.2c0,0,0-0.1-0.1-0.1h0.1c0.8-0.1,1.6-0.4,2.2-1c0.6-0.6,0.9-1.4,0.8-2.2c0-0.8-0.4-1.6-1-2.2 c-0.6-0.6-1.4-0.9-2.2-0.9c0,0-0.1,0-0.1,0c0,0,0-0.1,0-0.1c0.1-0.4,0.1-0.8,0.1-1.2c0-0.4-0.2-0.8-0.4-1.2 c-0.2-0.4-0.5-0.7-0.8-0.9C9.8,0.4,9.4,0.2,9,0.1C8.6,0,8.2,0,7.8,0c-0.4,0-0.8,0.2-1.2,0.4C6.2,0.6,5.9,0.9,5.6,1.2 C5.4,1.5,5.2,1.9,5.1,2.3c0,0,0,0.1,0,0.1c0,0-0.1-0.1-0.1-0.1C4.2,1.9,3.4,1.8,2.5,1.9C1.7,2.1,1,2.6,0.6,3.3 C0.1,3.9-0.1,4.8,0,5.6c0.1,0.8,0.6,1.5,1.3,2c0,0,0.1,0.1,0.1,0.1L1.3,7.8C0.7,8.3,0.2,9.1,0.1,9.9C0,10.8,0.3,11.6,0.8,12.3z");new Path2D("M9.3,0.1c0.2,0.1,0.3,0.2,0.4,0.3c0.1,0.2,0.2,0.3,0.2,0.5l0.3,3.8l3.3,1.9c0.2,0.1,0.3,0.2,0.4,0.4 C14,7.2,14,7.4,14,7.6c0,0.2-0.1,0.4-0.2,0.5c-0.1,0.2-0.3,0.3-0.4,0.3L9.9,9.9l-0.8,3.7c0,0.2-0.1,0.4-0.3,0.5 c-0.1,0.1-0.3,0.2-0.5,0.3c-0.2,0-0.4,0-0.6,0c-0.2-0.1-0.3-0.2-0.5-0.3l-2.5-2.9l-3.8,0.4c-0.2,0-0.4,0-0.5-0.1 c-0.2-0.1-0.3-0.2-0.4-0.4C0.1,10.9,0,10.8,0,10.6c0-0.2,0.1-0.4,0.2-0.5l2-3.2L0.6,3.3C0.5,3.1,0.5,2.9,0.5,2.6 C0.6,2.4,0.8,2.2,1,2c0.2-0.1,0.5-0.2,0.7-0.1l3.7,0.9l2.8-2.5C8.4,0.1,8.6,0,8.7,0C8.9,0,9.1,0,9.3,0.1z"),new Path2D("M0.7,4.2C0,4.6-0.2,5.5,0.2,6.1S1.4,7,2.1,6.7l7.2-4c0.7-0.4,0.9-1.2,0.5-1.9C9.4,0,8.6-0.2,7.9,0.2 L0.7,4.2z");const l=[a,new Path2D("M0,6c0-1.6,0.6-3.1,1.8-4.2S4.4,0,6,0s3.1,0.6,4.2,1.8S12,4.4,12,6c0,3.3-2.7,6-6,6 c-0.8,0-1.6-0.2-2.3-0.5s-1.4-0.7-1.9-1.3S0.8,9,0.5,8.3S0,6.8,0,6z")],r=window.innerWidth/2-100;return _.createElement(C,{width:e?t.width/2:t.width,height:t.height,recycle:!1,numberOfPieces:500,tweenDuration:1e4,colors:it.colors.split(", "),drawShape:e=>{e.fill(l[Math.floor(Math.random()*l.length)])},confettiSource:{w:r,x:(e?window.innerWidth/4:window.innerWidth/2)-r/2},initialVelocityY:{min:1,max:8}})}var ct="_container_16gnz_2",st="_containeriPhone_16gnz_15",dt="_inner_16gnz_24";const mt=e=>[e.box,e.items,e.message],ut=e=>[e.setBasePrice,e.addBoxToCart,e.clearData];function pt(){const[e,t,a]=D(mt),[l,r,n]=D(ut),i=window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i),o=h(ae,{variables:{boxquery:`id:${F.boxProductId}`}}),c=h(te,{variables:{query:`variant:title:'${F.variantIdentifier}' available_for_sale:true`},onCompleted:e=>{let t=0;e.products.edges.map((e=>{var a,l,r,n;const i=Number(null==(n=null==(r=null==(l=null==(a=null==e?void 0:e.node)?void 0:a.variants)?void 0:l.edges[0])?void 0:r.node)?void 0:n.price);t=0===t||i<t?i:t})),l(t)}}),s=c.data&&o.data&&e.capacity==t.length,d=[{url:"/",validation:()=>!0},{url:"/products",validation:()=>e.id},{url:"/message",validation:()=>e.capacity===t.length},{url:"/review",validation:()=>a.skip||a.to&&a.note}],m=e=>d[e].validation()?null:_.createElement(b,{to:d[e-1].url});return _.createElement("div",{className:`${ct} ${i?st:""}`},_.createElement("div",{className:dt},_.createElement($,null,_.createElement(w,null,_.createElement(S,{exact:!0,path:d[0].url},m(0),_.createElement(Qe,{products:c,boxes:o})),_.createElement(S,{path:`${d[1].url}/:prefilledBoxId?/:prefilledProductIds?`},m(1),_.createElement(Te,{products:c,boxes:o,screens:d}),s&&_.createElement(ot,null)),_.createElement(S,{exact:!0,path:d[2].url},m(2),_.createElement(Xe,{products:c}),s&&_.createElement(ot,null)),_.createElement(S,{exact:!0,path:d[3].url},m(3),_.createElement(tt,{products:c}),s&&_.createElement(ot,null))),_.createElement(nt,{screens:d,addBoxToCart:()=>{r(c)}}))))}k.polyfill();const _t=new T({link:P({uri:F.shopifyUrl,headers:{"X-Shopify-Storefront-Access-Token":F.shopifyAccessToken}}),cache:new I});function ft({children:e}){return _.createElement(q,{client:_t},e)}B.render(_.createElement(_.StrictMode,null,_.createElement(ft,null,_.createElement(pt,null))),document.getElementById("bab"));
